## 2.3 数据导入

如果我们在一家公司做数据分析，那么我们可以容易访问公司数据库中已有的数据。但是对于一个刚学习SQL的新手来说，并没有现成的数据库供你学习，“巧妇难为无米之炊”，因此我们学习时的第一步就是学会数据导入。

在工作中我们经常接触到的数据格式有以下三种：

| 文件格式 | 行数限制 | 易处理性 |
| -------- | -------- | -------- |
| xlsx/xls | 有限制   | 难处理   |
| CSV      | 无限制   | 容易处理 |
| TXT      | 无限制   | 容易处理 |

在平时办公中，我们接触最多的就是xlsx或者xls格式的工作簿，但是一张工作表存储的数据最多也只有100多万行，同时将Excel工作表导入到数据库中相对来说难处理一点。而CSV和TXT两种文本格式数据没有行数限制，同时导入到数据库中也比较方便，因此我们尽量获取CSV、TXT两种格式的文本来进行数据分析。

我们要想将文件中的数据导入数据库一般可以用Navicat的导入向导或者语句导入。使用导入向导的优点是简单直观，缺点是速度慢。使用语句导入优点是速度快，尤其是导入几个G数据的时候，两者差距非常明显，当然缺点就是需要写语句。下面我们针对这两种方式分别进行演练。

### 2.3.1 导入向导

我们以Kaggle网站上下载的公开电商零售数据为例，利用Navicat的导入向导将CSV文件中的数据导入数据库。

![图2.3.1-1](E:\IT-Audit\pictures\2.3.1-1.png)

如图2.3.1-1所示，在“表”图标上右键后点击“导入向导”。

![图2.3.1-2](E:\IT-Audit\pictures\2.3.1-2.png)

如图2.3.1-2所示，选择导入的文件数据格式。

![图2.3.1-3](E:\IT-Audit\pictures\2.3.1-3.png)

如图2.3.1-3所示，选择导入的文件路径。

![图2.3.1-4](E:\IT-Audit\pictures\2.3.1-4.png)

如图2.3.1-4所示，设置字段之间的分隔符，一般保持默认就可以。

![图2.3.1-5](E:\IT-Audit\pictures\2.3.1-5.png)

如图2.3.1-5所示， 一般文件数据的第一行是字段名称，数据从第二行开始，一般保持默认设置就可以。

![图2.3.1-6](E:\IT-Audit\pictures\2.3.1-6.png)

如图2.3.1-6所示，设置导入后目标表的名称，默认是导入文件名称，可能自定义修改。

![图2.3.1-7](E:\IT-Audit\pictures\2.3.1-7.png)

如图2.3.1-7所示，设置导入后的字段名称，数据类型。默认是原表数据名称，数据类型是varchar文本类型，最大长度为255字符。

![图2.3.1-8](E:\IT-Audit\pictures\2.3.1-8.png)

如图2.3.1-8所示，保持默认设置。

![图2.3.1-9](E:\IT-Audit\pictures\2.3.1-9.png)

如图2.3.1-9所示，点击“开始”进行数据导入。

![图2.1.3-10](E:\IT-Audit\pictures\2.3.1-10.png)

数据导入完成后，如图2.3.1-10所示，双击导入的“ecommerce”表，可以查看表中的字段和数据。

除了CSV外，我们常用的Excel，TXT格式的文件同样方法可以使用导入向导十分方便的导入，这里就不再赘述。需要注意的是如果Excel有时不能导入，可以先将其另存为CSV格式。如果文件中的数据包含有中文的时候，直接导入出现中文乱码，需要先将文件另存为utf-8编码格式。

### 2.3.2 语句导入

虽然导入向导非常简单，容易上手，但是有两种情况下，我们需要使用写SQL语句来导入数据：

1. 导入向导导入失败。
2. 导入数据很大，导入向导速度很慢。

采用语句导入的时候，我们需要分两步，首先创建一张空表，再将数据导入创建的空表。



> 1262 - Row 110 was truncated; it contained more data than there were input columns

| Variable | Value                                      |
| -------- | ------------------------------------------ |
| sql_mode | STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION |

